(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b81254c"],{"0b9d":function(e,t,i){},"859a":function(e,t,i){"use strict";i("ca04")},"9cf3":function(e,t,i){"use strict";i.r(t);i("386d");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[e.showAddQuestion?t("resourceItem",{attrs:{data:e.chiData,show:e.showAddQuestion},on:{action:e.handleAdd}}):e._e(),e._v(" "),t("div",{staticClass:"widget"},[t("div",{staticClass:"tool-bar"},[e._v("资源")]),e._v(" "),t("div",{staticClass:"search-group"},[t("el-form",{attrs:{inline:"",size:"mini"}},[t("el-form-item",[t("el-input",{attrs:{placeholder:"题目名称"},model:{value:e.listQuery.search,callback:function(t){e.$set(e.listQuery,"search",t)},expression:"listQuery.search"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.getList}},[e._v("查询")])],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.handleCreate}},[e._v("添加")])],1)],1)],1),e._v(" "),t("div",{staticClass:"widget-content"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{size:"mini",fit:"","highlight-current-row":"",stripe:"",data:e.listData}},[t("el-table-column",{attrs:{align:"center",label:"用户",prop:"username",width:"220"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"标题",prop:"resource.name",width:"220"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"组件",prop:"resource.app",width:"220"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"镜像",prop:"resource.image",width:"200"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"容器ID",prop:"container_id",width:"200"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"端口信息",prop:"port_info",width:"200"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"启动时间",prop:"date_created","show-overflow-tooltip":""}}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(i){return[0===i.row.status?t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.buildHandle(i.row)}}},[e._v("编译")]):e._e(),e._v(" "),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.editHandle(i.row)}}},[e._v("编辑")]),e._v(" "),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.deleteHandle(i.row)}}},[e._v("销毁")])]}}])})],1),e._v(" "),t("div",{staticClass:"pagination-container"},[t("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-size":e.listQuery.page_size,"page-sizes":[10,20,30,50],total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])],1)},n=[],s=(i("a481"),i("e876")),r=i("f0b3"),o={name:"resources",components:{resourceItem:r["a"]},data:function(){return{qType:[],listQuery:{page:1,page_size:10,subject:null,search:null},loading:!1,chiData:{},showAddQuestion:!1,total:0,listData:[],rid:null,captureName:null}},created:function(){this.getList(),this.getOptions()},methods:{getOptions:function(){var e=this;s["a"].get("/api/admin/ctf/question/type").then((function(t){e.qType=t.results}))},getList:function(){var e=this;this.loading=!0,s["a"].get("/api/admin/vuln/runner",this.listQuery).then((function(t){e.listData=t.data,e.loading=!1,e.total=t.total})).catch((function(e){}))},handleSizeChange:function(e){this.listQuery.page_size=e,this.getList()},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},handleCreate:function(){this.$router.replace({name:"vuln.edit_resource"})},buildHandle:function(e){var t=this;s["a"].post("/api/admin/docker/resource/".concat(e.id,"/build")).then((function(e){t.$message.success("任务已提交"),t.getList()}))},editHandle:function(e){this.$router.replace({name:"vuln.edit_resource",query:{id:e.id}})},deleteHandle:function(e){var t=this;s["a"].delete("/api/admin/vuln/runner/".concat(e.id)).then((function(e){t.$message({message:"删除成功",type:"success"}),t.getList()}))},handleAdd:function(e){this.showAddQuestion=!1,e&&this.getList()},switchActive:function(e,t){var i=this;s["a"].put("/api/admin/ctf/question/".concat(t.id),{active:e}).then((function(e){i.$message({message:"修改成功",type:"success",duration:2e3})}))}}},l=o,c=(i("b256"),i("2877")),u=Object(c["a"])(l,a,n,!1,null,"6f11a3ad",null);t["default"]=u.exports},b256:function(e,t,i){"use strict";i("0b9d")},ca04:function(e,t,i){},f0b3:function(e,t,i){"use strict";i("7f7f");var a=function(){var e=this,t=e._self._c;return e.show?t("el-dialog",{attrs:{"before-close":e.cancel,"show-close":!0,title:e.form.id?"编辑资源":"添加资源",visible:e.show,center:"","destroy-on-close":"","close-on-click-modal":!1,width:"40%"},on:{"update:visible":function(t){e.show=t},close:e.cancel}},[t("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,"label-width":"80px",size:"mini",rules:e.rules}},[t("el-form-item",{attrs:{label:"资源名称",docker_type_list:""}},[t("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"加载类型",required:""}},[t("el-select",{attrs:{size:"mini"},model:{value:e.form.docker_type,callback:function(t){e.$set(e.form,"docker_type",t)},expression:"form.docker_type"}},e._l(e.docker_type_list,(function(e){return t("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"镜像名称"}},[t("el-input",{model:{value:e.form.image,callback:function(t){e.$set(e.form,"image",t)},expression:"form.image"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"描述"}},[t("div",{staticClass:"markdown-body",attrs:{id:"my-markdown"}},[t("mavon-editor",{model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)])],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"mini"},on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1):e._e()},n=[],s=i("e876"),r=i("b2d8"),o=(i("64e1"),{components:{mavonEditor:r["mavonEditor"]},name:"addQuestion",props:{show:{type:Boolean},data:{type:Object}},data:function(){return{docker_type_list:[{label:"远程镜像",id:1}],resource_list:[],hostOption:[],imageOption:[],capture:null,fileChange:!1,options:[],attachment:[],form:{attachment:[],docker_type:null,image:null,name:null,description:null},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择类别",trigger:"blur"}],desc:[{required:!0,message:"请填写描述信息",trigger:"blur"},{min:3,max:200,message:"长度在 3 到 200 个字符",trigger:"blur"}],flag:[{required:!0,message:"请输入flag",trigger:"blur"},{min:3,max:64,message:"长度在 3 到 64 个字符",trigger:"blur"}]}}},created:function(){this.getOptions(),this.getResourceList()},methods:{getOptions:function(){var e=this;s["a"].get("/api/admin/ctf/question/type").then((function(t){e.options=t.data}))},getResourceList:function(){var e=this;s["a"].get("/api/admin/docker/resource",{page_size:99999,status:1}).then((function(t){e.resource_list=t.data}))},getDockerHost:function(){var e=this;s["a"].get("/api/admin/docker/host",{page_size:999}).then((function(t){e.hostOption=t.data}))},cancel:function(){this.$emit("action",!1)},submit:function(){var e=this;this.form.id||s["a"].post("/api/admin/vuln",this.form).then((function(t){e.$emit("action",!0),e.$message({message:"提交成功",type:"success"})}))}}}),l=o,c=(i("859a"),i("2877")),u=Object(c["a"])(l,a,n,!1,null,"4bcc6852",null);t["a"]=u.exports}}]);