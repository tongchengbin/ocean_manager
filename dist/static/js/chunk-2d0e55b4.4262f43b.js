(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e55b4"],{"93ae":function(t,e,i){"use strict";i.r(e);i("7f7f"),i("386d");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"widget"},[e("div",{staticClass:"tool-bar"},[t._v("Compose数据库")]),t._v(" "),e("div",{staticClass:"search-group"},[e("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"名称"},model:{value:t.listQuery.search,callback:function(e){t.$set(t.listQuery,"search",e)},expression:"listQuery.search"}}),t._v(" "),e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.getList()}}},[t._v("查询")]),t._v(" "),e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handleCreate}},[t._v("添加")])],1),t._v(" "),e("div",{staticClass:"widget-content"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{fit:"","highlight-current-row":"",stripe:"",size:"mini",data:t.list}},[e("el-table-column",{attrs:{label:"名称",prop:"name",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{label:"路径",prop:"path",width:"150px",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{width:"180px",align:"center",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(i){return[0===i.row.status?e("el-tag",[t._v("创建中")]):t._e(),t._v(" "),1===i.row.status?e("el-tag",[t._v("已编译")]):t._e(),t._v(" "),2===i.row.status?e("el-tag",[t._v("编译失败")]):t._e()]}}])}),t._v(" "),e("el-table-column",{attrs:{align:"center",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.handleBuild(i.row.id)}}},[t._v("编译")]),t._v(" "),e("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.handleDelete(i.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),e("div",{staticClass:"pagination-container"},[e("el-pagination",{attrs:{background:"","current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.page_size,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)]),t._v(" "),e("el-dialog",{attrs:{visible:t.centerDialogVisible,title:"新增Compose",width:"30%",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[e("el-form",{attrs:{size:"mini"}},[e("el-form-item",{attrs:{label:"名称"}},[e("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"路径"}},[e("el-input",{model:{value:t.form.path,callback:function(e){t.$set(t.form,"path",e)},expression:"form.path"}})],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"mini"},on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handleSubmit}},[t._v("提交")])],1)],1)],1)},n=[],s=i("b775"),l={name:"compose_db",data:function(){return{form:{},centerDialogVisible:!1,listQuery:{},listLoading:!1,list:[],total:0}},created:function(){this.getList()},methods:{getList:function(){var t=this;s["a"].get("/api/admin/docker/compose_db").then((function(e){var i=e.data,a=e.total;console.log(i,a),t.list=i,t.total=a}))},handleCreate:function(){this.centerDialogVisible=!0},handleBuild:function(t){var e=this;s["a"].post("/api/admin/docker/compose_db/".concat(t,"/build")).then((function(t){e.getList()}))},handleDelete:function(t){var e=this;s["a"].delete("/api/admin/docker/compose_db/".concat(t)).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getList()}))},handleSubmit:function(){var t=this;s["a"].post("/api/admin/docker/compose_db",this.form).then((function(e){t.$message({message:"添加成功",type:"success"}),t.form={},t.centerDialogVisible=!1,t.getList()}))},handleSizeChange:function(t){this.listQuery.page_size=t,this.fetchData()},handleCurrentChange:function(t){this.listQuery.page=t,this.fetchData()}}},o=l,r=i("2877"),c=Object(r["a"])(o,a,n,!1,null,"87210702",null);e["default"]=c.exports}}]);